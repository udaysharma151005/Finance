<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Set Budget</title>
    <meta charset="UTF-8">
    <link rel="stylesheet" th:href="@{/css/dashboard.css}">
</head>
<div th:replace="fragments/navbar :: body"></div>
<body>
<!-- ðŸ”— Navbar -->
<!--<header class="nav-glow">-->
<!--    <div class="nav-logo"><span>Uday<span class="highlight">Finance</span></span></div>-->
<!--    <nav class="nav-menu">-->
<!--        <a th:href="@{/dashboard}">Dashboard</a>-->
<!--        <a th:href="@{/ledger}">Ledger</a>-->
<!--        <a th:href="@{/budget}" class="active-link">Budget</a>-->
<!--        <form th:action="@{/logout}" method="post">-->
<!--            <button type="submit" class="logout-button">Logout</button>-->
<!--        </form>-->
<!--    </nav>-->
<!--</header>-->

<!-- ðŸ’¼ Budget Section -->
<div class="container">
    <h2>ðŸ“… Monthly Budget</h2>

    <form th:action="@{/set-budget}" method="post" style="margin-top: 20px;">
        <input type="number" name="monthlyBudget" step="0.01" th:value="${monthlyBudget}"
               placeholder="Enter Monthly Budget" required>
        <button type="submit">ðŸ’° Save Budget</button>
    </form>

    <div th:if="${monthlyBudget != null}" style="margin-top: 20px;">
        <p><strong>Budget Set:</strong> â‚¹<span th:text="${monthlyBudget}">0.00</span></p>
        <p><strong>Expense This Month:</strong> â‚¹<span th:text="${totalExpenseThisMonth}">0.00</span></p>
        <p>
            <strong>Remaining:</strong> â‚¹
            <span th:text="${monthlyBudget - totalExpenseThisMonth}">0.00</span>
            <span th:if="${remainingBudget < 0}" style="color: red;">(Over Budget!)</span>
            <span th:if="${remainingBudget >= 0}" style="color: green;">(Under Budget âœ…)</span>
        </p>

        <progress th:class="${remainingBudget < 0} ? 'progress-red' : 'progress-green'"
                  th:value="${totalExpenseThisMonth}" th:max="${monthlyBudget}"
                  style="width: 100%; height: 18px; margin-top: 10px; border-radius: 10px;"></progress>
    </div>
</div>
<div th:replace="fragments/footer :: body"></div>

</body>
</html>
